// Generated by CoffeeScript 1.7.1
(function() {
  var Fs, SessionStore, _;

  Fs = require('fs');

  _ = require('underscore');

  SessionStore = (function() {
    function SessionStore(fileName) {
      this.fileName = fileName;
      if (Fs.existsSync(this.fileName)) {
        this.sessions = JSON.parse(Fs.readFileSync(this.fileName).toString());
      } else {
        this.sessions = {};
      }
    }

    SessionStore.prototype.all = function() {
      return _.clone(this.sessions);
    };

    SessionStore.prototype.get = function(sessionId) {
      return this.sessions[sessionId];
    };

    SessionStore.prototype.set = function(sessionId, session) {
      this.sessions[sessionId] = session;
      this.save();
      return session;
    };

    SessionStore.prototype.destroy = function(sessionId) {
      delete this.sessions[sessionId];
      return this.save();
    };

    SessionStore.prototype.save = function() {
      return Fs.writeFileSync(this.fileName, JSON.stringify(this.sessions));
    };

    return SessionStore;

  })();

  module.exports = SessionStore;

}).call(this);

//# sourceMappingURL=session_store.map
